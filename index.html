<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#0d1117" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="description" content="Launch your GitHub RDP session with one tap" />
  <title>GitRDP ‚Äî Remote Desktop Launcher</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üñ•Ô∏è</text></svg>" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <!-- Animated background -->
    <div class="bg-grid"></div>
    <div class="bg-glow bg-glow--1"></div>
    <div class="bg-glow bg-glow--2"></div>

    <!-- Header -->
    <header class="header">
      <div class="header__logo">
        <span class="header__icon">üñ•Ô∏è</span>
        <div>
          <h1 class="header__title">GitRDP</h1>
          <p class="header__subtitle">Remote Desktop Launcher</p>
        </div>
      </div>
      <button class="btn-icon" id="settingsToggle" aria-label="Settings">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
      </button>
    </header>

    <!-- Settings Panel (collapsible) -->
    <section class="settings-panel" id="settingsPanel">
      <div class="card card--settings">
        <h2 class="card__title">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          GitHub Connection
        </h2>
        <div class="form-group">
          <label class="form-label" for="patInput">Personal Access Token</label>
          <div class="input-wrapper">
            <input type="password" id="patInput" class="form-input" placeholder="ghp_xxxxxxxxxxxx" autocomplete="off" />
            <button class="btn-icon btn-icon--sm" id="togglePatVisibility" aria-label="Toggle visibility">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
            </button>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="repoInput">Repository</label>
            <input type="text" id="repoInput" class="form-input" value="satheesh123T/MyRDP" />
          </div>
          <div class="form-group">
            <label class="form-label" for="workflowInput">Workflow ID</label>
            <input type="text" id="workflowInput" class="form-input" value="218600404" />
          </div>
        </div>
        <button class="btn btn--secondary" id="saveSettings">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
          Save Settings
        </button>
        <p class="form-hint" id="settingsStatus"></p>
      </div>
    </section>

    <!-- Main Content -->
    <main class="main">
      <!-- Launch Card -->
      <section class="card card--launch" id="launchCard">
        <div class="status-indicator" id="statusIndicator">
          <div class="status-indicator__dot" id="statusDot"></div>
          <span class="status-indicator__text" id="statusText">Ready to launch</span>
        </div>
        <button class="btn btn--launch" id="launchBtn">
          <div class="btn__icon-wrap">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>
          </div>
          <span>Launch RDP</span>
        </button>
        <p class="launch-info" id="launchInfo">Starts a Windows Remote Desktop session via GitHub Actions</p>
      </section>

      <!-- Progress Card (hidden by default) -->
      <section class="card card--progress hidden" id="progressCard">
        <h2 class="card__title">Workflow Progress</h2>
        <div class="progress-steps" id="progressSteps">
          <div class="step" data-step="queued">
            <div class="step__dot"></div>
            <div class="step__info">
              <span class="step__name">Queued</span>
              <span class="step__desc">Waiting for a runner</span>
            </div>
          </div>
          <div class="step" data-step="in_progress">
            <div class="step__dot"></div>
            <div class="step__info">
              <span class="step__name">Configuring RDP</span>
              <span class="step__desc">Setting up remote desktop</span>
            </div>
          </div>
          <div class="step" data-step="tailscale">
            <div class="step__dot"></div>
            <div class="step__info">
              <span class="step__name">Tailscale VPN</span>
              <span class="step__desc">Establishing secure tunnel</span>
            </div>
          </div>
          <div class="step" data-step="ready">
            <div class="step__dot"></div>
            <div class="step__info">
              <span class="step__name">Ready</span>
              <span class="step__desc">RDP session is live</span>
            </div>
          </div>
        </div>
        <div class="progress-timer">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
          <span id="elapsedTime">0:00</span>
        </div>
      </section>

      <!-- Credentials Card (hidden by default) -->
      <section class="card card--creds hidden" id="credsCard">
        <div class="creds-header">
          <div class="creds-header__badge">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
            Connected
          </div>
        </div>
        <div class="cred-items">
          <div class="cred-item">
            <label class="cred-item__label">Tailscale IP</label>
            <div class="cred-item__value-wrap">
              <span class="cred-item__value" id="credIP">‚Äî</span>
              <button class="btn-icon btn-icon--sm btn-copy" data-target="credIP" aria-label="Copy IP">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
              </button>
            </div>
          </div>
          <div class="cred-item">
            <label class="cred-item__label">Username</label>
            <div class="cred-item__value-wrap">
              <span class="cred-item__value" id="credUser">RDP</span>
              <button class="btn-icon btn-icon--sm btn-copy" data-target="credUser" aria-label="Copy Username">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
              </button>
            </div>
          </div>
          <div class="cred-item">
            <label class="cred-item__label">Password</label>
            <div class="cred-item__value-wrap">
              <span class="cred-item__value cred-item__value--mono" id="credPass">‚Äî</span>
              <button class="btn-icon btn-icon--sm btn-copy" data-target="credPass" aria-label="Copy Password">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
              </button>
            </div>
          </div>
        </div>
        <button class="btn btn--danger" id="stopBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>
          Stop Session
        </button>
      </section>

      <!-- Recent Runs -->
      <section class="card card--runs" id="runsCard">
        <h2 class="card__title">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
          Recent Runs
        </h2>
        <div class="runs-list" id="runsList">
          <p class="runs-empty">No recent runs</p>
        </div>
      </section>
    </main>

    <!-- Toast container -->
    <div class="toast-container" id="toastContainer"></div>
  </div>

  <script src="app.js"></script>
</body>
</html>
